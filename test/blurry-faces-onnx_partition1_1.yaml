imports:
- ec3_custom_types: https://raw.githubusercontent.com/grycap/ec3/tosca/tosca/custom_types.yaml
topology_template:
  inputs:
    cluster_name:
      default: oscar-cluster-fixed17
      type: string
    top_influx_token:
      default: fixed30
      type: string
    top_influx_url:
      default: https://influx.oscar-cluster-fixed26.im.grycap.net
      type: string
  node_templates:
    oscar_service_blurry-faces-onnx_partition1_1:
      properties:
        cpu: 0.9
        env_variables:
          COMPONENT_NAME: blurry-faces-onnx_partition1_1
          DRIFT_DETECTOR_MINIO_AK: minio
          DRIFT_DETECTOR_MINIO_FOLDER: drift_detector
          DRIFT_DETECTOR_MINIO_SK: fixed29
          DRIFT_DETECTOR_MINIO_URL: https://minio.oscar-cluster-fixed26.im.grycap.net
          KCI: https://minio.graspi.im.grycap.net
          MONIT_HOST: ai-sprint-mask-detection-app-telegraf
          MONIT_PORT: '8094'
        image: registry.gitlab.polimi.it/ai-sprint/blurry-faces-onnx_partition1_1:tag
        input:
        - path: blurry-faces-onnx-partition1-1/input
          storage_provider: minio
        memory: 1024Mi
        name: blurry-faces-onnx-partition1-1
        output:
        - path: blurry-faces-onnx-partition1-1/output
          storage_provider: minio.oscar-cluster-fixed19
        script: /opt/blurry-faces-onnx_partition1_1/script.sh
        storage_providers:
          minio:
            oscar-cluster-fixed19:
              access_key: minio
              endpoint: https://minio.oscar-cluster-fixed19.im.grycap.net
              region: us-east-1
              secret_key: fixed22
      type: tosca.nodes.aisprint.FaaS.Function
  outputs:
    oscar_service_cred:
      value:
        get_attribute:
        - oscar_service_blurry-faces-onnx_partition1_1
        - credential
    oscar_service_url:
      value:
        get_attribute:
        - oscar_service_blurry-faces-onnx_partition1_1
        - endpoint
tosca_definitions_version: tosca_simple_yaml_1_0
